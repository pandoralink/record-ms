import{r as o,j as t,u as w}from"./index-B4UGxPOW.js";import"./with-default-props-B7uQ1QtS.js";import{N as L}from"./nav-bar-BllPegUf.js";import{S as h}from"./space-BPjOIxEH.js";import{u as j,l as O,a as S}from"./context-BltC6UDM.js";import{u as v}from"./hooks-YXEHxMme.js";import{B as M}from"./button-DloahT0b.js";import{C as R}from"./card-o0hLhSJg.js";import{M as p,D as f,E}from"./index-BDxQhh6q.js";import{I as g}from"./input-hV2H68hw.js";import{S as b,D as F}from"./swipe-action-DVN-L70-.js";import{T as B}from"./tag-DIQnkqsD.js";import{T as D}from"./index-BRx5sgc6.js";import{A as y}from"./AddCircleOutline-DtNNAb2Z.js";import"./index-kXkBLS8A.js";import"./index-BvZ__38l.js";import"./isBrowser-CU3-RGUT.js";import"./validate-C9kWW5ul.js";import"./use-isomorphic-update-layout-effect-NT1QjfJe.js";import"./index-n9e96kxF.js";import"./spin-loading-CQgek1q9.js";import"./react-spring-web.esm-ZeBH8eNv.js";import"./should-render-C9OUz-kT.js";import"./with-stop-propagation-hPxRTu59.js";import"./config-provider-ClNQu-57.js";import"./attach-properties-to-component-CxYBDbn1.js";import"./use-props-value-CTciXfrJ.js";import"./useInputHandleKeyDown-Ck4z5xoR.js";function N(e){return o.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),o.createElement("g",{id:"MessageOutline-MessageOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"MessageOutline-编组"},o.createElement("rect",{id:"MessageOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),o.createElement("path",{d:"M24,5 C35.0454654,5 44,13.5065417 44,23.9999335 C44,34.3816935 35.234974,42.8187175 24.3517967,42.9970537 L24,42.999934 C20.5361038,43.0086689 17.1256565,42.1499296 14.0827434,40.5027329 L9.12272736,42.6506288 C8.20180797,43.0490167 7.13075643,42.6289802 6.73046083,41.7124519 C6.57362597,41.3533578 6.53805635,40.953324 6.6290919,40.5723965 L7.89727419,35.2705244 C5.44727043,32.1174388 4,28.2188348 4,23.999959 C4,13.5065671 12.9545346,5 24,5 Z M24.0000207,7.7142478 C14.4327303,7.7142478 6.7272871,15.0337886 6.7272871,23.9999335 C6.7272871,27.3746822 7.816377,30.5920198 9.81910787,33.2999345 L10.0545624,33.6102666 L10.851834,34.636263 L9.70274404,39.4387082 L14.2191094,37.4844293 L15.3900175,38.1213809 C17.9854744,39.5319012 20.9309429,40.2855624 24.0000207,40.2855624 C33.5672971,40.2855624 41.2727403,32.9660501 41.2727403,23.9999051 C41.2727403,15.0337601 33.5672971,7.7142478 24.0000207,7.7142478 Z M16.2500001,22 C17.2164956,22 18,22.7835004 18,23.75 C18,24.7164955 17.2164997,25.5 16.2500001,25.5 L16.2499999,25.5 C15.2835044,25.5 14.5,24.7164996 14.5,23.75 C14.5,22.7835045 15.2835003,22 16.2499999,22 L16.2500001,22 Z M32.2500001,22 C33.2164956,22 34,22.7835004 34,23.75 C34,24.7164955 33.2164997,25.5 32.2500001,25.5 L32.2499999,25.5 C31.2835044,25.5 30.5,24.7164996 30.5,23.75 C30.5,22.7835045 31.2835003,22 32.2499999,22 L32.2500001,22 Z M24.2500001,22 C25.2164956,22 26,22.7835004 26,23.75 C26,24.7164955 25.2164997,25.5 24.2500001,25.5 L24.2499999,25.5 C23.2835044,25.5 22.5,24.7164996 22.5,23.75 C22.5,22.7835045 23.2835003,22 24.2499999,22 L24.2500001,22 Z",id:"MessageOutline-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}const z=({aKey:e,name:i})=>{const n=v(),c=j(),[l,a]=o.useState(i),m=o.useRef("");m.current=l;const[C,k]=o.useState(""),x=o.useRef("");return x.current=C,t.jsx("div",{style:{backgroundColor:"#f2f2f7",padding:"16px"},children:t.jsx(R,{style:{padding:0},bodyStyle:{padding:0},onClick:()=>{p.show({content:t.jsxs("div",{children:[t.jsx(g,{placeholder:"请输入内容",defaultValue:C,onChange:s=>{k(s)}}),t.jsx(f,{style:{margin:0}})]}),closeOnAction:!0,closeOnMaskClick:!0,actions:[{key:"confirm-record",text:"保存",primary:!0,onClick:()=>{n({aKey:e,name:i},x.current)}}]})},children:t.jsx(b,{style:{borderRadius:8},rightActions:[{key:"rename",text:t.jsx(E,{fontSize:36}),color:"warning",onClick:s=>{s.stopPropagation(),p.show({content:t.jsxs("div",{children:[t.jsx(g,{placeholder:"请输入内容",defaultValue:l,onChange:r=>{a(r)}}),t.jsx(f,{style:{margin:0}})]}),closeOnAction:!0,closeOnMaskClick:!0,actions:[{key:"confirm-rename",text:"重命名",primary:!0,onClick:()=>{c(r=>{if(!r)return[];const d=O.cloneDeep(r),u=d.find(A=>A.aKey===e);return u&&m.current!==u.name&&(u.name=m.current),d})}}]})}},{key:"delete",text:t.jsx(F,{fontSize:36}),color:"danger",onClick:s=>{s.stopPropagation(),c(r=>(r==null?void 0:r.filter(d=>d.aKey!==e))||[])}}],children:t.jsxs(h,{justify:"between",align:"center",style:{padding:8,width:"100%"},children:[t.jsx(B,{round:!0,color:"primary",style:{fontSize:20,minWidth:80,paddingTop:8,paddingBottom:8},children:i}),t.jsx(M,{className:"add-action-btn",fill:"none",onClick:s=>{s.stopPropagation(),n({aKey:e,name:i}),D.show({content:"+1",position:"top",duration:100})},children:t.jsx(y,{color:"var(--adm-color-primary)",fontSize:36})})]})})})})},T=()=>{const[e,i]=o.useState(""),n=o.useRef("");n.current=e;const c=j(),l=o.useCallback(()=>{c(a=>a?[...a,{name:n.current,aKey:new Date().getTime()}]:[])},[c]);return t.jsx(y,{color:"var(--adm-color-primary)",fontSize:36,onClick:a=>{a.stopPropagation(),p.show({content:t.jsxs("div",{children:[t.jsx(g,{placeholder:"请输入内容",defaultValue:e,onChange:i}),t.jsx(f,{style:{margin:0}})]}),closeOnAction:!0,closeOnMaskClick:!0,actions:[{key:"confirm-add-action",text:"添加",primary:!0,onClick:l}]})}})},ut=()=>{const e=S(),i=w();return t.jsxs(t.Fragment,{children:[t.jsx(L,{style:{backgroundColor:"#f2f2f7"},back:null,right:t.jsx("div",{style:{paddingTop:8},children:t.jsxs(h,{children:[t.jsx(T,{}),t.jsx(N,{color:"var(--adm-color-primary)",fontSize:36,onClick:n=>{n.stopPropagation(),i("/recent-action")}})]})})}),t.jsx("div",{className:"action-list",style:{paddingBottom:80},children:e==null?void 0:e.map(n=>t.jsx("div",{children:t.jsx(z,{...n})},n.aKey))})]})};export{ut as ActionList};
