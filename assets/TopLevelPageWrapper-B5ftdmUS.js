import{R as t,r as x,u as k,a as j,j as l,O as K}from"./index-CD25rNzz.js";import{c as v,w as g,m as P}from"./with-default-props-c_1x5czA.js";import{S as N}from"./safe-area-BeZQWdzk.js";import{a as $}from"./attach-properties-to-component-CxYBDbn1.js";import{u as A}from"./use-props-value-DeCXLii1.js";import{t as C}from"./traverse-react-node-DQN5s-2r.js";import"./index-DZVwJEoC.js";const d="adm-badge",h=t.createElement(t.Fragment,null),w=o=>{const{content:a,color:s,children:n}=o,p=a===h,u=v(d,{[`${d}-fixed`]:!!n,[`${d}-dot`]:p,[`${d}-bordered`]:o.bordered}),i=a||a===0?g(o,t.createElement("div",{className:u,style:{"--color":s}},!p&&t.createElement("div",{className:`${d}-content`},a))):null;return n?t.createElement("div",{className:v(`${d}-wrapper`,o.wrapperClassName),style:o.wrapperStyle},n,i):i},b=$(w,{dot:h}),B=()=>null,c="adm-tab-bar",T={safeArea:!1},S=o=>{var a;const s=P(T,o);let n=null;const p=[];C(s.children,(e,r)=>{if(!x.isValidElement(e))return;const f=e.key;typeof f=="string"&&(r===0&&(n=f),p.push(e))});const[u,i]=A({value:s.activeKey,defaultValue:(a=s.defaultActiveKey)!==null&&a!==void 0?a:n,onChange:e=>{var r;e!==null&&((r=s.onChange)===null||r===void 0||r.call(s,e))}});return g(s,t.createElement("div",{className:c},t.createElement("div",{className:`${c}-wrap`},p.map(e=>{const r=e.key===u;function f(){const m=e.props.icon&&t.createElement("div",{className:`${c}-item-icon`},typeof e.props.icon=="function"?e.props.icon(r):e.props.icon),y=e.props.title&&t.createElement("div",{className:v(`${c}-item-title`,!!m&&`${c}-item-title-with-icon`)},typeof e.props.title=="function"?e.props.title(r):e.props.title);return m?t.createElement(t.Fragment,null,t.createElement(b,{content:e.props.badge,className:`${c}-icon-badge`},m),y):y?t.createElement(b,{content:e.props.badge,className:`${c}-title-badge`},y):null}return g(e.props,t.createElement("div",{key:e.key,onClick:()=>{const{key:m}=e;m!=null&&i(m.toString())},className:v(`${c}-item`,{[`${c}-item-active`]:r})},f()))})),s.safeArea&&t.createElement(N,{position:"bottom"})))},E=$(S,{Item:B}),R=({activeKey:o,setActiveKey:a})=>{const s=[{key:"action",title:"行为"},{key:"analyse",title:"分析"},{key:"setting",title:"设置"}];return l.jsx(E,{activeKey:o,safeArea:!0,onChange:n=>a(n),children:s.map(n=>l.jsx(E.Item,{title:n.title},n.key))})},F=({activeKey:o,setActiveKey:a})=>l.jsx("div",{className:"tab-bar",style:{position:"fixed",bottom:0,width:"100%",borderTop:"solid 1px var(--adm-color-border)"},children:l.jsx(R,{activeKey:o,setActiveKey:a})}),q=()=>{const o=k(),{pathname:a}=j(),s=a.split("/"),n=s[s.length-1],[p,u]=x.useState(()=>["action","analyse","setting"].includes(n)?n:"action");return l.jsxs(l.Fragment,{children:[l.jsx(N,{position:"top",style:{background:"#f2f2f7"}}),l.jsx(K,{}),l.jsx(F,{activeKey:p,setActiveKey:i=>{u(i),o(i)}})]})};export{q as TopLevelPageWrapper};
