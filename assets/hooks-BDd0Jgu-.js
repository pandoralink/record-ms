import{r as m}from"./index-BzfneoA9.js";import{j as K,k as a,l as y}from"./context-C861iW53.js";import{u as l}from"./utils-DqhwL_u_.js";function k(){const s=K(),c=a();return m.useCallback((i,d="")=>{c(o=>{const u=new Date().getTime(),t={time:new Date().getTime(),desc:d};if(!o)return[{rKey:s,items:[{rKey:u,actionItem:i,record:[t]}]}];const r=y.cloneDeep(o),n=r.find(e=>e.rKey===s);if(n){const e=n.items.find(f=>f.actionItem.aKey===i.aKey);e?e.record.push(t):n.items.push({rKey:u,actionItem:i,record:[t]})}else r.push({rKey:s,items:[{rKey:u,actionItem:i,record:[t]}]}),r.sort((e,f)=>e.rKey>f.rKey?-1:e.rKey<f.rKey?1:0);return r})},[s,c])}function D(){const s=a();return m.useCallback((c,i,d)=>{s(o=>l(c,i,d,o))},[s])}function I(){const s=a();return m.useCallback((c,i,d,o)=>{s(u=>{if(!u)return[];const t=y.cloneDeep(u),r=t==null?void 0:t.find(e=>e.rKey===d),n=r==null?void 0:r.items.find(e=>e.actionItem.aKey===i.aKey);if(!r)return t;if(n){const e=n.record.find(f=>f.time===o);e&&(e.time=c.time,e.desc=c.desc)}return t})},[s])}function h(){const s=a();return m.useCallback((c,i,d,o)=>{s(u=>{if(!u)return[];const t=y.cloneDeep(u),r=t==null?void 0:t.find(e=>e.rKey===d),n=r==null?void 0:r.items.find(e=>e.actionItem.aKey===i.aKey);return r&&n&&(n.record=n.record.filter(e=>e.time!==c.time),n.record.length===0&&(r.items=r.items.filter(e=>e.actionItem.aKey!==i.aKey),o==null||o())),t})},[s])}export{D as a,I as b,h as c,k as u};
