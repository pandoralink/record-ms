import{r as m}from"./index-CLDmDy33.js";import{g as K,h as a,l as y}from"./context-BI_FLQri.js";function C(){const n=K(),u=a();return m.useCallback((i,f="")=>{u(o=>{const c=new Date().getTime(),r={time:new Date().getTime(),desc:f};if(!o)return[{rKey:n,items:[{rKey:c,actionItem:i,record:[r]}]}];const t=y.cloneDeep(o),s=t.find(e=>e.rKey===n);if(s){const e=s.items.find(d=>d.actionItem.aKey===i.aKey);e?e.record.push(r):s.items.push({rKey:c,actionItem:i,record:[r]})}else t.push({rKey:n,items:[{rKey:c,actionItem:i,record:[r]}]}),t.sort((e,d)=>e.rKey>d.rKey?-1:e.rKey<d.rKey?1:0);return t})},[n,u])}function D(){const n=a();return m.useCallback((u,i,f)=>{n(o=>{if(!o)return[];const c=new Date().getTime(),r=y.cloneDeep(o),t=r==null?void 0:r.find(e=>e.rKey===f),s=t==null?void 0:t.items.find(e=>e.actionItem.aKey===i.aKey);return t&&(s?s.record.push(u):t==null||t.items.push({rKey:c,actionItem:i,record:[u]})),r})},[n])}function h(){const n=a();return m.useCallback((u,i,f,o)=>{n(c=>{if(!c)return[];const r=y.cloneDeep(c),t=r==null?void 0:r.find(e=>e.rKey===f),s=t==null?void 0:t.items.find(e=>e.actionItem.aKey===i.aKey);if(!t)return r;if(s){const e=s.record.find(d=>d.time===o);e&&(e.time=u.time,e.desc=u.desc)}return r})},[n])}function k(){const n=a();return m.useCallback((u,i,f,o)=>{n(c=>{if(!c)return[];const r=y.cloneDeep(c),t=r==null?void 0:r.find(e=>e.rKey===f),s=t==null?void 0:t.items.find(e=>e.actionItem.aKey===i.aKey);return t&&s&&(s.record=s.record.filter(e=>e.time!==u.time),s.record.length===0&&(t.items=t.items.filter(e=>e.actionItem.aKey!==i.aKey),o==null||o())),r})},[n])}export{D as a,h as b,k as c,C as u};
