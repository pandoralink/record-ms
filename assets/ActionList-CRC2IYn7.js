import{r as o,j as t,u as w}from"./index-BKYHviBL.js";import"./with-default-props-Cw5r2lmh.js";import{N as L}from"./nav-bar-CN-jShyS.js";import{S as h}from"./space-CO4GaFR4.js";import{u as j,l as O,a as S}from"./context-CvGcWdEt.js";import{M as p,D as f,E as v}from"./index-ClQDLxvM.js";import{I as g}from"./input-M0AVySy-.js";import{A as y}from"./AddCircleOutline-Bh1m41Y_.js";import{B as M}from"./button-C0scqWR1.js";import{C as R}from"./card-BPohsxVP.js";import{S as E,D as b}from"./swipe-action-BBjnjFZ1.js";import{T as F}from"./tag-BORL6-1o.js";import{T as B}from"./index-g1DRo9VM.js";import{u as D}from"./hooks-CDcXpyfB.js";import"./index-DlGwl23E.js";import"./use-isomorphic-update-layout-effect-BT0cFhW5.js";import"./index-swgKdKc9.js";import"./auto-center-DenqAhi6.js";import"./spin-loading-DFI-ZVyh.js";import"./react-spring-web.esm-DtOvouu1.js";import"./should-render-DhzTJ4TY.js";import"./with-stop-propagation-ChvrdJ6D.js";import"./config-provider-C3XxMxLT.js";import"./use-inner-visible-Dvli9FyR.js";import"./attach-properties-to-component-CxYBDbn1.js";import"./use-props-value-B6YOK46Q.js";import"./bound-sRU-RDN8.js";import"./validate-DifivnA4.js";import"./useInputHandleKeyDown-piWpNX7l.js";import"./use-gesture-react.esm-DoQXfDlG.js";import"./utils-CSvAkENd.js";function N(e){return o.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{style:Object.assign({verticalAlign:"-0.125em"},e.style),className:["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),o.createElement("g",{id:"MessageOutline-MessageOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"MessageOutline-编组"},o.createElement("rect",{id:"MessageOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),o.createElement("path",{d:"M24,5 C35.0454654,5 44,13.5065417 44,23.9999335 C44,34.3816935 35.234974,42.8187175 24.3517967,42.9970537 L24,42.999934 C20.5361038,43.0086689 17.1256565,42.1499296 14.0827434,40.5027329 L9.12272736,42.6506288 C8.20180797,43.0490167 7.13075643,42.6289802 6.73046083,41.7124519 C6.57362597,41.3533578 6.53805635,40.953324 6.6290919,40.5723965 L7.89727419,35.2705244 C5.44727043,32.1174388 4,28.2188348 4,23.999959 C4,13.5065671 12.9545346,5 24,5 Z M24.0000207,7.7142478 C14.4327303,7.7142478 6.7272871,15.0337886 6.7272871,23.9999335 C6.7272871,27.3746822 7.816377,30.5920198 9.81910787,33.2999345 L10.0545624,33.6102666 L10.851834,34.636263 L9.70274404,39.4387082 L14.2191094,37.4844293 L15.3900175,38.1213809 C17.9854744,39.5319012 20.9309429,40.2855624 24.0000207,40.2855624 C33.5672971,40.2855624 41.2727403,32.9660501 41.2727403,23.9999051 C41.2727403,15.0337601 33.5672971,7.7142478 24.0000207,7.7142478 Z M16.2500001,22 C17.2164956,22 18,22.7835004 18,23.75 C18,24.7164955 17.2164997,25.5 16.2500001,25.5 L16.2499999,25.5 C15.2835044,25.5 14.5,24.7164996 14.5,23.75 C14.5,22.7835045 15.2835003,22 16.2499999,22 L16.2500001,22 Z M32.2500001,22 C33.2164956,22 34,22.7835004 34,23.75 C34,24.7164955 33.2164997,25.5 32.2500001,25.5 L32.2499999,25.5 C31.2835044,25.5 30.5,24.7164996 30.5,23.75 C30.5,22.7835045 31.2835003,22 32.2499999,22 L32.2500001,22 Z M24.2500001,22 C25.2164956,22 26,22.7835004 26,23.75 C26,24.7164955 25.2164997,25.5 24.2500001,25.5 L24.2499999,25.5 C23.2835044,25.5 22.5,24.7164996 22.5,23.75 C22.5,22.7835045 23.2835003,22 24.2499999,22 L24.2500001,22 Z",id:"MessageOutline-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}const z=()=>{const[e,n]=o.useState(""),i=o.useRef("");i.current=e;const c=j(),l=o.useCallback(()=>{c(a=>a?[...a,{name:i.current,aKey:new Date().getTime()}]:[])},[c]);return t.jsx(y,{color:"var(--adm-color-primary)",fontSize:36,onClick:a=>{a.stopPropagation(),p.show({content:t.jsxs("div",{children:[t.jsx(g,{placeholder:"请输入内容",defaultValue:e,onChange:n}),t.jsx(f,{style:{margin:0}})]}),closeOnAction:!0,closeOnMaskClick:!0,actions:[{key:"confirm-add-action",text:"添加",primary:!0,onClick:l}]})}})},T=({aKey:e,name:n})=>{const i=D(),c=j(),[l,a]=o.useState(n),m=o.useRef("");m.current=l;const[C,k]=o.useState(""),x=o.useRef("");return x.current=C,t.jsx("div",{style:{backgroundColor:"#f2f2f7",padding:"16px"},children:t.jsx(R,{style:{padding:0},bodyStyle:{padding:0},onClick:()=>{p.show({content:t.jsxs("div",{children:[t.jsx(g,{placeholder:"请输入内容",defaultValue:C,onChange:s=>{k(s)}}),t.jsx(f,{style:{margin:0}})]}),closeOnAction:!0,closeOnMaskClick:!0,actions:[{key:"confirm-record",text:"保存",primary:!0,onClick:()=>{i({aKey:e,name:n},x.current)}}]})},children:t.jsx(E,{style:{borderRadius:8},rightActions:[{key:"rename",text:t.jsx(v,{fontSize:36}),color:"warning",onClick:s=>{s.stopPropagation(),p.show({content:t.jsxs("div",{children:[t.jsx(g,{placeholder:"请输入内容",defaultValue:l,onChange:r=>{a(r)}}),t.jsx(f,{style:{margin:0}})]}),closeOnAction:!0,closeOnMaskClick:!0,actions:[{key:"confirm-rename",text:"重命名",primary:!0,onClick:()=>{c(r=>{if(!r)return[];const d=O.cloneDeep(r),u=d.find(A=>A.aKey===e);return u&&m.current!==u.name&&(u.name=m.current),d})}}]})}},{key:"delete",text:t.jsx(b,{fontSize:36}),color:"danger",onClick:s=>{s.stopPropagation(),c(r=>(r==null?void 0:r.filter(d=>d.aKey!==e))||[])}}],children:t.jsxs(h,{justify:"between",align:"center",style:{padding:8,width:"100%"},children:[t.jsx(F,{round:!0,color:"primary",style:{fontSize:20,minWidth:80,paddingTop:8,paddingBottom:8},children:n}),t.jsx(M,{className:"add-action-btn",fill:"none",onClick:s=>{s.stopPropagation(),i({aKey:e,name:n}),B.show({content:"+1",position:"top",duration:100})},children:t.jsx(y,{color:"var(--adm-color-primary)",fontSize:36})})]})})})})},gt=()=>{const e=S(),n=w();return t.jsxs(t.Fragment,{children:[t.jsx(L,{style:{backgroundColor:"#f2f2f7"},back:null,right:t.jsx("div",{style:{paddingTop:8},children:t.jsxs(h,{children:[t.jsx(z,{}),t.jsx(N,{color:"var(--adm-color-primary)",fontSize:36,onClick:i=>{i.stopPropagation(),n("/recent-action")}})]})})}),t.jsx("div",{className:"action-list",style:{paddingBottom:80,backgroundColor:"#f2f2f7"},children:e==null?void 0:e.map(i=>t.jsx("div",{children:t.jsx(T,{...i})},i.aKey))})]})};export{gt as ActionList};
