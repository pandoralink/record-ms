import{R as t,r as x,u as k,a as j,j as l,O as C}from"./index-CLDmDy33.js";import{c as v,w as g,m as K}from"./with-default-props-DjbKOWzM.js";import{S as N}from"./safe-area-C6SM7shC.js";import{a as $}from"./attach-properties-to-component-CxYBDbn1.js";import{u as P}from"./use-props-value-nDxuIj36.js";import{t as A}from"./traverse-react-node-4px2SHUX.js";import"./index-CDiaa9NV.js";const d="adm-badge",h=t.createElement(t.Fragment,null),w=o=>{const{content:a,color:n,children:s}=o,p=a===h,u=v(d,{[`${d}-fixed`]:!!s,[`${d}-dot`]:p,[`${d}-bordered`]:o.bordered}),i=a||a===0?g(o,t.createElement("div",{className:u,style:{"--color":n}},!p&&t.createElement("div",{className:`${d}-content`},a))):null;return s?t.createElement("div",{className:v(`${d}-wrapper`,o.wrapperClassName),style:o.wrapperStyle},s,i):i},b=$(w,{dot:h}),B=()=>null,c="adm-tab-bar",T={safeArea:!1},S=o=>{var a;const n=K(T,o);let s=null;const p=[];A(n.children,(e,r)=>{if(!x.isValidElement(e))return;const f=e.key;typeof f=="string"&&(r===0&&(s=f),p.push(e))});const[u,i]=P({value:n.activeKey,defaultValue:(a=n.defaultActiveKey)!==null&&a!==void 0?a:s,onChange:e=>{var r;e!==null&&((r=n.onChange)===null||r===void 0||r.call(n,e))}});return g(n,t.createElement("div",{className:c},t.createElement("div",{className:`${c}-wrap`},p.map(e=>{const r=e.key===u;function f(){const m=e.props.icon&&t.createElement("div",{className:`${c}-item-icon`},typeof e.props.icon=="function"?e.props.icon(r):e.props.icon),y=e.props.title&&t.createElement("div",{className:v(`${c}-item-title`,!!m&&`${c}-item-title-with-icon`)},typeof e.props.title=="function"?e.props.title(r):e.props.title);return m?t.createElement(t.Fragment,null,t.createElement(b,{content:e.props.badge,className:`${c}-icon-badge`},m),y):y?t.createElement(b,{content:e.props.badge,className:`${c}-title-badge`},y):null}return g(e.props,t.createElement("div",{key:e.key,onClick:()=>{const{key:m}=e;m!=null&&i(m.toString())},className:v(`${c}-item`,{[`${c}-item-active`]:r})},f()))})),n.safeArea&&t.createElement(N,{position:"bottom"})))},E=$(S,{Item:B}),R=({activeKey:o,setActiveKey:a})=>{const n=[{key:"action",title:"行为"},{key:"analyse",title:"分析"},{key:"note",title:"随记"},{key:"setting",title:"设置"}];return l.jsx(E,{activeKey:o,safeArea:!0,onChange:s=>a(s),children:n.map(s=>l.jsx(E.Item,{title:s.title},s.key))})},F=({activeKey:o,setActiveKey:a})=>l.jsx("div",{className:"tab-bar",style:{position:"fixed",bottom:0,width:"100%",borderTop:"solid 1px var(--adm-color-border)",backgroundColor:"var(--adm-color-background)"},children:l.jsx(R,{activeKey:o,setActiveKey:a})}),q=()=>{const o=k(),{pathname:a}=j(),n=a.split("/"),s=n[n.length-1],[p,u]=x.useState(()=>["action","analyse","note","setting"].includes(s)?s:"action");return l.jsxs(l.Fragment,{children:[l.jsx(N,{position:"top",style:{background:"#f2f2f7"}}),l.jsx(C,{}),l.jsx(F,{activeKey:p,setActiveKey:i=>{u(i),o(i)}})]})};export{q as TopLevelPageWrapper};
