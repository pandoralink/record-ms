import{u as l,a as f,r as c,j as e}from"./index-By7UgRYt.js";import"./with-default-props-CBsXvwG_.js";import{B as m,C as p,S as g,T as x}from"./tag-D0MbBOvs.js";import{N as h}from"./nav-bar-A3hYDKde.js";import{S as j}from"./safe-area-BzdNV_Ox.js";import{b as S}from"./context-Bd8U8-Yf.js";import{C as y,U as b}from"./UnorderedListOutline-Bt8V5tlk.js";import"./index-BvdF-Vz4.js";import"./validate-Bt6ATdnj.js";function C(s){const t=new Date(s);let o=t.getHours();return t.getMinutes()>=30&&o++,`${o.toString().padStart(2,"0")}:30`}function I(s){const t={};return s.record.forEach(o=>{const r=C(o.time);t[r]||(t[r]=0),t[r]++}),t}function k({clickItemList:s}){const t={};return s.forEach(o=>{const r=I(o);Object.entries(r).forEach(([n,a])=>{t[n]||(t[n]=[]),t[n].push({actionItem:o.actionItem.name,count:a})})}),e.jsx("div",{children:Object.entries(t).map(([o,r])=>e.jsx("div",{style:{backgroundColor:"#f2f2f7",padding:"16px"},children:e.jsx(p,{title:`${parseInt(o.split(":")[0],10)-1}:30-${o}`,bodyStyle:{textAlign:"left"},children:e.jsx(g,{children:r.map(n=>e.jsxs(x,{round:!0,color:"primary",style:{fontSize:18,fontWeight:"bold",minWidth:60,paddingTop:4,paddingBottom:4,textAlign:"center"},children:[n.actionItem," + ",n.count]},n.actionItem))})})},o))})}const D=()=>{const s=l(),t=S(),[o]=f(),[r]=c.useState(o.get("recordKey")||""),[n,a]=c.useState(!0),d=c.useMemo(()=>{var i;return((i=t==null?void 0:t.find(u=>u.rKey===r))==null?void 0:i.items)||[]},[r,t]);return d?e.jsxs(e.Fragment,{children:[e.jsx(j,{position:"top",style:{background:"#f2f2f7"}}),e.jsx(h,{style:{backgroundColor:"#f2f2f7"},onBack:()=>{s(-1)},right:e.jsx("div",{style:{paddingTop:8},children:e.jsx(m,{fill:"none",onClick:()=>{a(i=>!i)},children:n?e.jsx(y,{fontSize:24}):e.jsx(b,{fontSize:24})})})}),e.jsx(k,{clickItemList:d})]}):null};export{D as RecordTagDetailWithDay};
