import{r as f}from"./index-BAp2uJNA.js";import{k as a,m as y,l}from"./context-C4UcBI1T.js";import{u as K}from"./utils-Boy3u2nq.js";function k(){const t=a();return f.useCallback(i=>{t(n=>{const c=[{rKey:i,items:[]}];return n?[...n,...c]:c})},[t])}function I(){const t=y(),i=a();return f.useCallback((n,c="")=>{i(u=>{const d=new Date().getTime(),r={time:new Date().getTime(),desc:c};if(!u)return[{rKey:t,items:[{rKey:d,actionItem:n,record:[r]}]}];const s=l.cloneDeep(u),o=s.find(e=>e.rKey===t);if(o){const e=o.items.find(m=>m.actionItem.aKey===n.aKey);e?e.record.push(r):o.items.push({rKey:d,actionItem:n,record:[r]})}else s.push({rKey:t,items:[{rKey:d,actionItem:n,record:[r]}]}),s.sort((e,m)=>e.rKey>m.rKey?-1:e.rKey<m.rKey?1:0);return s})},[t,i])}function D(){const t=a();return f.useCallback((i,n,c)=>{t(u=>K(i,n,c,u))},[t])}function h(){const t=a();return f.useCallback((i,n,c,u)=>{t(d=>{if(!d)return[];const r=l.cloneDeep(d),s=r==null?void 0:r.find(e=>e.rKey===c),o=s==null?void 0:s.items.find(e=>e.actionItem.aKey===n.aKey);if(!s)return r;if(o){const e=o.record.find(m=>m.time===u);e&&(e.time=i.time,e.desc=i.desc)}return r})},[t])}function L(){const t=a();return f.useCallback((i,n,c,u)=>{t(d=>{if(!d)return[];const r=l.cloneDeep(d),s=r==null?void 0:r.find(e=>e.rKey===c),o=s==null?void 0:s.items.find(e=>e.actionItem.aKey===n.aKey);return s&&o&&(o.record=o.record.filter(e=>e.time!==i.time),o.record.length===0&&(s.items=s.items.filter(e=>e.actionItem.aKey!==n.aKey),u==null||u())),r})},[t])}export{k as a,D as b,h as c,L as d,I as u};
