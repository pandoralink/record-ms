import{r as i,R as m}from"./index-CaUIdpB1.js";import{u as H}from"./index-CLK3fMnF.js";import{r as w}from"./index.esm-Cg_c7sd2.js";import{m as K,w as j}from"./with-default-props-BZQsUyOg.js";import{u as S}from"./use-props-value-CCwjlj-J.js";import{u as $}from"./useInputHandleKeyDown-mGdPDvoN.js";const u="adm-text-area",y={rows:2,showCount:!1,autoSize:!1,defaultValue:""},A=i.forwardRef((C,E)=>{const e=K(y,C),{autoSize:o,showCount:f,maxLength:r}=e,[c,d]=S(Object.assign(Object.assign({},e),{value:e.value===null?"":e.value}));e.value;const s=i.useRef(null),R=i.useRef("auto"),x=i.useRef(null),b=$({onEnterPress:e.onEnterPress,onKeyDown:e.onKeyDown,nativeInputRef:s,enterKeyHint:e.enterKeyHint});i.useImperativeHandle(E,()=>({clear:()=>{d("")},focus:()=>{var t;(t=s.current)===null||t===void 0||t.focus()},blur:()=>{var t;(t=s.current)===null||t===void 0||t.blur()},get nativeElement(){return s.current}})),H(()=>{if(!o)return;const t=s.current,n=x.current;if(!t||(t.style.height=R.current,!n))return;let a=n.scrollHeight;if(typeof o=="object"){const P=window.getComputedStyle(t),g=parseFloat(P.lineHeight);o.minRows&&(a=Math.max(a,o.minRows*g)),o.maxRows&&(a=Math.min(a,o.maxRows*g))}R.current=`${a}px`,t.style.height=`${a}px`},[c,o]);const p=i.useRef(!1);let v;const h=w(c).length;typeof f=="function"?v=f(h,r):f&&(v=m.createElement("div",{className:`${u}-count`},r===void 0?h:h+"/"+r));let l=e.rows;return typeof o=="object"&&(o.maxRows&&l>o.maxRows&&(l=o.maxRows),o.minRows&&l<o.minRows&&(l=o.minRows)),j(e,m.createElement("div",{className:u},m.createElement("textarea",{ref:s,className:`${u}-element`,rows:l,value:c,placeholder:e.placeholder,onChange:t=>{let n=t.target.value;r&&!p.current&&(n=w(n).slice(0,r).join("")),d(n)},id:e.id,onCompositionStart:t=>{var n;p.current=!0,(n=e.onCompositionStart)===null||n===void 0||n.call(e,t)},onCompositionEnd:t=>{var n;if(p.current=!1,r){const a=t.target.value;d(w(a).slice(0,r).join(""))}(n=e.onCompositionEnd)===null||n===void 0||n.call(e,t)},autoComplete:e.autoComplete,autoFocus:e.autoFocus,disabled:e.disabled,readOnly:e.readOnly,name:e.name,onFocus:e.onFocus,onBlur:e.onBlur,onClick:e.onClick,onKeyDown:b}),v,o&&m.createElement("textarea",{ref:x,className:`${u}-element ${u}-element-hidden`,value:c,rows:l,"aria-hidden":!0,readOnly:!0})))});A.defaultProps=y;export{A as T};
