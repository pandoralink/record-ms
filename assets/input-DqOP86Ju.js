import{r as i,d as w,R as f}from"./index-DE9JW7L8.js";import{a as L,m as b,w as E,c as F}from"./with-default-props-ZNhL5bow.js";import{i as g,d as x}from"./index-C_OXVGSL.js";import{u as R}from"./use-props-value-Bal7tDYD.js";import{u as S,a as k}from"./validate-gfvL6HFD.js";var p=g?i.useLayoutEffect:i.useEffect;function I(t){return(typeof t=="function"?t():t)||document.body}function j(t,o){if(L&&t){const e=I(t);return w.createPortal(o,e)}return o}function P(t){const o=i.useRef(t);return t&&(o.current=!0),!!o.current}const $=t=>_(t.active,t.forceRender,t.destroyOnClose)?t.children:null;function _(t,o,e){const a=P(t);return o||t?!0:a?!e:!1}const N={click:"onClick",touchstart:"onTouchStart"};function A(t,o){const e=Object.assign({},o.props);for(const a of t){const u=N[a];e[u]=function(l){var d,s;l.stopPropagation(),(s=(d=o.props)[u])===null||s===void 0||s.call(d,l)}}return f.cloneElement(o,e)}function K(t){return i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{style:Object.assign({verticalAlign:"-0.125em"},t.style),className:["antd-mobile-icon",t.className].filter(Boolean).join(" ")}),i.createElement("g",{id:"CloseCircleFill-CloseCircleFill",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"CloseCircleFill-编组"},i.createElement("rect",{id:"CloseCircleFill-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),i.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M18.6753876,16 L15.5637812,16 C15.4576916,16 15.3559474,16.0421451 15.2809323,16.1171635 C15.124726,16.2733766 15.1247316,16.5266426 15.2809447,16.6828489 L15.2809447,16.6828489 L22.299066,23.7006641 L14.6828159,31.3171619 C14.6078042,31.3921761 14.5656632,31.4939157 14.5656632,31.6 C14.5656632,31.8209139 14.7447493,32 14.9656632,32 L14.9656632,32 L18.0753284,32 C18.1814068,32 18.2831412,31.9578638 18.3581544,31.8828594 L18.3581544,31.8828594 L24.420066,25.8216641 L30.4818451,31.8828564 C30.5568585,31.9578626 30.6585942,32 30.7646741,32 L30.7646741,32 L33.8763476,32 C33.9824309,32 34.0841695,31.9578599 34.1591835,31.8828496 C34.315397,31.7266436 34.3154031,31.4733776 34.1591972,31.3171641 L34.1591972,31.3171641 L26.542066,23.6996641 L33.5591874,16.6828489 C33.6342057,16.6078338 33.6763508,16.5060896 33.6763508,16.4 C33.6763508,16.1790861 33.4972647,16 33.2763508,16 L33.2763508,16 L30.1637654,16 C30.0576705,16 29.9559218,16.0421493 29.8809058,16.1171741 L29.8809058,16.1171741 L24.420066,21.5786641 L18.9582218,16.1171488 C18.883208,16.0421394 18.7814701,16 18.6753876,16 L18.6753876,16 Z",id:"CloseCircleFill-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}const T=x(p);function O(t,o,e){let a=t;return o!==void 0&&(a=Math.max(t,o)),e!==void 0&&(a=Math.min(a,e)),a}function D({onEnterPress:t,onKeyDown:o,nativeInputRef:e,enterKeyHint:a}){const u=l=>{t&&(l.code==="Enter"||l.keyCode===13)&&t(l),o==null||o(l)};return p(()=>{const l=e.current;if(!(!a||!l))return l.setAttribute("enterkeyhint",a),()=>{l.removeAttribute("enterkeyhint")}},[a]),u}const m="adm-input",M={defaultValue:"",onlyShowClearWhenFocus:!0},W=i.forwardRef((t,o)=>{const e=b(M,t),[a,u]=R(e),[l,d]=i.useState(!1),s=i.useRef(!1),c=i.useRef(null),{locale:v}=S(),C=D({onEnterPress:e.onEnterPress,onKeyDown:e.onKeyDown,nativeInputRef:c,enterKeyHint:e.enterKeyHint});i.useImperativeHandle(o,()=>({clear:()=>{u("")},focus:()=>{var n;(n=c.current)===null||n===void 0||n.focus()},blur:()=>{var n;(n=c.current)===null||n===void 0||n.blur()},get nativeElement(){return c.current}}));function h(){let n=a;if(e.type==="number"){const r=n&&O(parseFloat(n),e.min,e.max).toString();Number(n)!==Number(r)&&(n=r)}n!==a&&u(n)}const y=!e.clearable||!a||e.readOnly?!1:e.onlyShowClearWhenFocus?l:!0;return E(e,f.createElement("div",{className:F(`${m}`,e.disabled&&`${m}-disabled`)},f.createElement("input",{ref:c,className:`${m}-element`,value:a,onChange:n=>{u(n.target.value)},onFocus:n=>{var r;d(!0),(r=e.onFocus)===null||r===void 0||r.call(e,n)},onBlur:n=>{var r;d(!1),h(),(r=e.onBlur)===null||r===void 0||r.call(e,n)},id:e.id,placeholder:e.placeholder,disabled:e.disabled,readOnly:e.readOnly,maxLength:e.maxLength,minLength:e.minLength,max:e.max,min:e.min,autoComplete:e.autoComplete,enterKeyHint:e.enterKeyHint,autoFocus:e.autoFocus,pattern:e.pattern,inputMode:e.inputMode,type:e.type,name:e.name,autoCapitalize:e.autoCapitalize,autoCorrect:e.autoCorrect,onKeyDown:C,onKeyUp:e.onKeyUp,onCompositionStart:n=>{var r;s.current=!0,(r=e.onCompositionStart)===null||r===void 0||r.call(e,n)},onCompositionEnd:n=>{var r;s.current=!1,(r=e.onCompositionEnd)===null||r===void 0||r.call(e,n)},onClick:e.onClick,step:e.step,role:e.role,"aria-valuenow":e["aria-valuenow"],"aria-valuemax":e["aria-valuemax"],"aria-valuemin":e["aria-valuemin"],"aria-label":e["aria-label"]}),y&&f.createElement("div",{className:`${m}-clear`,onMouseDown:n=>{n.preventDefault()},onClick:()=>{var n,r;u(""),(n=e.onClear)===null||n===void 0||n.call(e),k()&&s.current&&(s.current=!1,(r=c.current)===null||r===void 0||r.blur())},"aria-label":v.Input.clear},f.createElement(K,null))))});export{W as I,$ as S,T as a,O as b,_ as c,j as r,p as u,A as w};
