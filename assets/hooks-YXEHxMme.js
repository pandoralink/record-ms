import{r as m}from"./index-B4UGxPOW.js";import{g as l,h as a,l as d}from"./context-BltC6UDM.js";function C(){const n=l(),u=a();return m.useCallback((i,f="")=>{u(o=>{const c=new Date().getTime(),s={time:new Date().getTime(),desc:f};if(!o)return[{rKey:n,items:[{rKey:c,actionItem:i,record:[s]}]}];const e=d.cloneDeep(o),r=e==null?void 0:e.find(t=>t.rKey===n);if(r){const t=r.items.find(y=>y.actionItem.aKey===i.aKey);t?t.record.push(s):r.items.push({rKey:c,actionItem:i,record:[s]})}else e==null||e.push({rKey:n,items:[{rKey:c,actionItem:i,record:[s]}]});return e})},[n,u])}function D(){const n=a();return m.useCallback((u,i,f)=>{n(o=>{if(!o)return[];const c=new Date().getTime(),s=d.cloneDeep(o),e=s==null?void 0:s.find(t=>t.rKey===f),r=e==null?void 0:e.items.find(t=>t.actionItem.aKey===i.aKey);return e&&(r?r.record.push(u):e==null||e.items.push({rKey:c,actionItem:i,record:[u]})),s})},[n])}function h(){const n=a();return m.useCallback((u,i,f,o)=>{n(c=>{if(!c)return[];const s=d.cloneDeep(c),e=s==null?void 0:s.find(t=>t.rKey===f),r=e==null?void 0:e.items.find(t=>t.actionItem.aKey===i.aKey);if(!e)return s;if(r){const t=r.record.find(y=>y.time===o);t&&(t.time=u.time,t.desc=u.desc)}return s})},[n])}function k(){const n=a();return m.useCallback((u,i,f,o)=>{n(c=>{if(!c)return[];const s=d.cloneDeep(c),e=s==null?void 0:s.find(t=>t.rKey===f),r=e==null?void 0:e.items.find(t=>t.actionItem.aKey===i.aKey);return e&&r&&(r.record=r.record.filter(t=>t.time!==u.time),r.record.length===0&&(e.items=e.items.filter(t=>t.actionItem.aKey!==i.aKey),o==null||o())),s})},[n])}export{D as a,h as b,k as c,C as u};
