import{r,R as c}from"./index-CaUIdpB1.js";import{m as D,w as P}from"./with-default-props-BZQsUyOg.js";import{u as W,a as k}from"./react-spring-web.esm-Cqvp7RIO.js";import{u as M}from"./use-gesture-react.esm-of4kvy0g.js";import{B as N}from"./button-B7J9mGER.js";import{w as A}from"./with-stop-propagation-ByJRqfip.js";function F(o){return r.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o,{style:Object.assign({verticalAlign:"-0.125em"},o.style),className:["antd-mobile-icon",o.className].filter(Boolean).join(" ")}),r.createElement("g",{id:"DeleteOutline-DeleteOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{fill:"currentColor",fillRule:"nonzero",id:"DeleteOutline-形状结合"},r.createElement("path",{d:"M33,3 C34.6568542,3 36,4.34314575 36,6 L36,9 L42.6,9 C42.8209139,9 43,9.1790861 43,9.4 L43,11.6 C43,11.8209139 42.8209139,12 42.6,12 L41,12 L41,39 C41,42.3137085 38.3137085,45 35,45 L13,45 C9.6862915,45 7,42.3137085 7,39 L7,12 L5.4,12 C5.1790861,12 5,11.8209139 5,11.6 L5,9.4 C5,9.1790861 5.1790861,9 5.4,9 L12,9 L12,6 C12,4.34314575 13.3431458,3 15,3 L33,3 Z M38,12 L10,12 L10,39 C10,40.5976809 11.24892,41.9036609 12.8237272,41.9949073 L13,42 L35,42 C36.5976809,42 37.9036609,40.75108 37.9949073,39.1762728 L38,39 L38,12 Z M19.6,18 C19.8209139,18 20,18.1790861 20,18.4 L20,35.6 C20,35.8209139 19.8209139,36 19.6,36 L17.4,36 C17.1790861,36 17,35.8209139 17,35.6 L17,18.4 C17,18.1790861 17.1790861,18 17.4,18 L19.6,18 Z M31.6,18 C31.8209139,18 32,18.1790861 32,18.4 L32,35.6 C32,35.8209139 31.8209139,36 31.6,36 L29.4,36 C29.1790861,36 29,35.8209139 29,35.6 L29,18.4 C29,18.1790861 29.1790861,18 29.4,18 L31.6,18 Z M33,6 L15,6 L15,9 L33,9 L33,6 Z"}))))}function _(o,g){return o.reduce((n,f)=>Math.abs(n-g)<Math.abs(f-g)?n:f)}const l="adm-swipe-action",$={rightActions:[],leftActions:[],closeOnTouchOutside:!0,closeOnAction:!0,stopPropagation:[]},H=r.forwardRef((o,g)=>{const n=D($,o),f=r.useRef(null),R=r.useRef(null),x=r.useRef(null);function E(e){const t=e.current;return t?t.offsetWidth:0}function L(){return E(R)}function C(){return E(x)}const[{x:u},d]=W(()=>({x:0,config:{tension:200,friction:30}}),[]),m=r.useRef(!1),w=r.useRef(null);function b(){var e;(e=w.current)===null||e===void 0||e.call(w),m.current=!1}const y=M(e=>{var t;if(w.current=e.cancel,!e.intentional||(e.down&&(m.current=!0),!m.current))return;const[i]=e.offset;if(e.last){const h=L(),p=C();let a=i+e.velocity[0]*e.direction[0]*50;i>0?a=Math.max(0,a):i<0?a=Math.min(0,a):a=0;const s=_([-p,0,h],a);d.start({x:s}),s!==0&&((t=o.onActionsReveal)===null||t===void 0||t.call(o,s>0?"left":"right")),window.setTimeout(()=>{m.current=!1})}else d.start({x:i,immediate:!0})},{from:()=>[u.get(),0],bounds:()=>{const e=L();return{left:-C(),right:e}},axis:"x",preventScroll:!0,pointer:{touch:!0},triggerAllEvents:!0});function v(){d.start({x:0}),b()}r.useImperativeHandle(g,()=>({show:(e="right")=>{var t;e==="right"?d.start({x:-C()}):e==="left"&&d.start({x:L()}),(t=o.onActionsReveal)===null||t===void 0||t.call(o,e)},close:v})),r.useEffect(()=>{if(!n.closeOnTouchOutside)return;function e(t){if(u.get()===0)return;const i=f.current;i&&!i.contains(t.target)&&v()}return document.addEventListener("touchstart",e),()=>{document.removeEventListener("touchstart",e)}},[n.closeOnTouchOutside]);function O(e){var t,i;const h=(t=e.color)!==null&&t!==void 0?t:"light";return c.createElement(N,{key:e.key,className:`${l}-action-button`,style:{"--background-color":(i=B[h])!==null&&i!==void 0?i:h},onClick:p=>{var a,s;n.closeOnAction&&v(),(a=e.onClick)===null||a===void 0||a.call(e,p),(s=n.onAction)===null||s===void 0||s.call(n,e,p)}},e.text)}return P(n,c.createElement("div",Object.assign({className:l},y(),{ref:f,onClickCapture:e=>{m.current&&(e.stopPropagation(),e.preventDefault())}}),c.createElement(k.div,{className:`${l}-track`,style:{x:u}},A(n.stopPropagation,c.createElement("div",{className:`${l}-actions ${l}-actions-left`,ref:R},n.leftActions.map(O))),c.createElement("div",{className:`${l}-content`,onClickCapture:e=>{u.goal!==0&&(e.preventDefault(),e.stopPropagation(),v())}},c.createElement(k.div,{style:{pointerEvents:u.to(e=>e!==0&&u.goal!==0?"none":"auto")}},n.children)),A(n.stopPropagation,c.createElement("div",{className:`${l}-actions ${l}-actions-right`,ref:x},n.rightActions.map(O))))))}),B={light:"var(--adm-color-light)",weak:"var(--adm-color-weak)",primary:"var(--adm-color-primary)",success:"var(--adm-color-success)",warning:"var(--adm-color-warning)",danger:"var(--adm-color-danger)"};export{F as D,H as S};
