import{r as m}from"./index-C_UHGJlV.js";import{k as y,m as I,l as K}from"./context-CHFXciok.js";import{u as C}from"./utils-bhuKeDjx.js";function h(){const s=y();return m.useCallback(o=>{s(i=>{const c=[{rKey:o,items:[]}];return i?[...i,...c]:c})},[s])}function k(){const s=I(),o=y();return m.useCallback((i,c="")=>{o(d=>{const u=new Date().getTime(),n={time:new Date().getTime(),desc:c};if(!d)return[{rKey:s,items:[{rKey:u,actionItem:i,record:[n]}]}];const t=K.cloneDeep(d),r=t.find(e=>e.rKey===s);if(r){const e=r.items.find(f=>f.actionItem.aKey===i.aKey);e?e.record.push(n):r.items.push({rKey:u,actionItem:i,record:[n]})}else t.push({rKey:s,items:[{rKey:u,actionItem:i,record:[n]}]}),t.sort((e,f)=>e.rKey>f.rKey?-1:e.rKey<f.rKey?1:0);return t})},[s,o])}function g(){const s=y();return m.useCallback((o,i,c,d)=>{s(u=>{var l,p;const n=C(o,i,d,u),t=n.find(a=>a.rKey===d),r=(l=t==null?void 0:t.items)==null?void 0:l.find(a=>a.actionItem.aKey===c.aKey),e=r==null?void 0:r.record,f=e==null?void 0:e.findIndex(a=>a.time===o.time);return f!==void 0&&f!==-1&&(e==null||e.splice(f,1)),(r==null?void 0:r.record.length)===0&&((p=t==null?void 0:t.items)==null||p.splice(t==null?void 0:t.items.findIndex(a=>a.rKey===r.rKey),1)),n})},[s])}function L(){const s=y();return m.useCallback((o,i,c,d)=>{s(u=>{if(!u)return[];const n=K.cloneDeep(u),t=n==null?void 0:n.find(e=>e.rKey===c),r=t==null?void 0:t.items.find(e=>e.actionItem.aKey===i.aKey);if(!t)return n;if(r){const e=r.record.find(f=>f.time===d);e&&(e.time=o.time,e.desc=o.desc)}return n})},[s])}function b(){const s=y();return m.useCallback((o,i,c,d)=>{s(u=>{if(!u)return[];const n=K.cloneDeep(u),t=n==null?void 0:n.find(e=>e.rKey===c),r=t==null?void 0:t.items.find(e=>e.actionItem.aKey===i.aKey);return t&&r&&(r.record=r.record.filter(e=>e.time!==o.time),r.record.length===0&&(t.items=t.items.filter(e=>e.actionItem.aKey!==i.aKey),d==null||d())),n})},[s])}function A(){const s=y();return m.useCallback(o=>{s(i=>{if(!i)return[];const c=K.cloneDeep(i),d=c.findIndex(u=>u.rKey===o);return c.splice(d,1),c})},[s])}export{A as a,h as b,g as c,L as d,b as e,k as u};
