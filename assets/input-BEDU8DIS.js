import{r as t,R as c}from"./index-4K8MCTj1.js";import{u as w}from"./use-props-value-DEiOoCBn.js";import{m as F,w as L,c as y}from"./with-default-props-D4fAU74E.js";import{a as b}from"./validate-D9IZnNEL.js";import{u as g}from"./useInputHandleKeyDown-DpWn5ALs.js";import{u as E}from"./config-provider-4QUlm3fk.js";function x(o){return t.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o,{style:Object.assign({verticalAlign:"-0.125em"},o.style),className:["antd-mobile-icon",o.className].filter(Boolean).join(" ")}),t.createElement("g",{id:"CloseCircleFill-CloseCircleFill",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},t.createElement("g",{id:"CloseCircleFill-编组"},t.createElement("rect",{id:"CloseCircleFill-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),t.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M18.6753876,16 L15.5637812,16 C15.4576916,16 15.3559474,16.0421451 15.2809323,16.1171635 C15.124726,16.2733766 15.1247316,16.5266426 15.2809447,16.6828489 L15.2809447,16.6828489 L22.299066,23.7006641 L14.6828159,31.3171619 C14.6078042,31.3921761 14.5656632,31.4939157 14.5656632,31.6 C14.5656632,31.8209139 14.7447493,32 14.9656632,32 L14.9656632,32 L18.0753284,32 C18.1814068,32 18.2831412,31.9578638 18.3581544,31.8828594 L18.3581544,31.8828594 L24.420066,25.8216641 L30.4818451,31.8828564 C30.5568585,31.9578626 30.6585942,32 30.7646741,32 L30.7646741,32 L33.8763476,32 C33.9824309,32 34.0841695,31.9578599 34.1591835,31.8828496 C34.315397,31.7266436 34.3154031,31.4733776 34.1591972,31.3171641 L34.1591972,31.3171641 L26.542066,23.6996641 L33.5591874,16.6828489 C33.6342057,16.6078338 33.6763508,16.5060896 33.6763508,16.4 C33.6763508,16.1790861 33.4972647,16 33.2763508,16 L33.2763508,16 L30.1637654,16 C30.0576705,16 29.9559218,16.0421493 29.8809058,16.1171741 L29.8809058,16.1171741 L24.420066,21.5786641 L18.9582218,16.1171488 C18.883208,16.0421394 18.7814701,16 18.6753876,16 L18.6753876,16 Z",id:"CloseCircleFill-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}function K(o,i,e){let n=o;return i!==void 0&&(n=Math.max(o,i)),e!==void 0&&(n=Math.min(n,e)),n}const m="adm-input",N={defaultValue:"",onlyShowClearWhenFocus:!0},I=t.forwardRef((o,i)=>{const e=F(N,o),[n,u]=w(e),[C,d]=t.useState(!1),s=t.useRef(!1),r=t.useRef(null),{locale:f}=E(),p=g({onEnterPress:e.onEnterPress,onKeyDown:e.onKeyDown,nativeInputRef:r,enterKeyHint:e.enterKeyHint});t.useImperativeHandle(i,()=>({clear:()=>{u("")},focus:()=>{var l;(l=r.current)===null||l===void 0||l.focus()},blur:()=>{var l;(l=r.current)===null||l===void 0||l.blur()},get nativeElement(){return r.current}}));function v(){let l=n;if(e.type==="number"){const a=l&&K(parseFloat(l),e.min,e.max).toString();Number(l)!==Number(a)&&(l=a)}l!==n&&u(l)}const h=!e.clearable||!n||e.readOnly?!1:e.onlyShowClearWhenFocus?C:!0;return L(e,c.createElement("div",{className:y(`${m}`,e.disabled&&`${m}-disabled`)},c.createElement("input",{ref:r,className:`${m}-element`,value:n,onChange:l=>{u(l.target.value)},onFocus:l=>{var a;d(!0),(a=e.onFocus)===null||a===void 0||a.call(e,l)},onBlur:l=>{var a;d(!1),v(),(a=e.onBlur)===null||a===void 0||a.call(e,l)},id:e.id,placeholder:e.placeholder,disabled:e.disabled,readOnly:e.readOnly,maxLength:e.maxLength,minLength:e.minLength,max:e.max,min:e.min,autoComplete:e.autoComplete,enterKeyHint:e.enterKeyHint,autoFocus:e.autoFocus,pattern:e.pattern,inputMode:e.inputMode,type:e.type,name:e.name,autoCapitalize:e.autoCapitalize,autoCorrect:e.autoCorrect,onKeyDown:p,onKeyUp:e.onKeyUp,onCompositionStart:l=>{var a;s.current=!0,(a=e.onCompositionStart)===null||a===void 0||a.call(e,l)},onCompositionEnd:l=>{var a;s.current=!1,(a=e.onCompositionEnd)===null||a===void 0||a.call(e,l)},onClick:e.onClick,step:e.step,role:e.role,"aria-valuenow":e["aria-valuenow"],"aria-valuemax":e["aria-valuemax"],"aria-valuemin":e["aria-valuemin"],"aria-label":e["aria-label"]}),h&&c.createElement("div",{className:`${m}-clear`,onMouseDown:l=>{l.preventDefault()},onClick:()=>{var l,a;u(""),(l=e.onClear)===null||l===void 0||l.call(e),b()&&s.current&&(s.current=!1,(a=r.current)===null||a===void 0||a.blur())},"aria-label":f.Input.clear},c.createElement(x,null))))});export{I,K as b};
